@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===============================
   PHONON UI - DESIGN SYSTEM
   Swiss Typography + PHI Spacing
   LLM-Ready Components
   =============================== */

@layer base {
  :root {
    /* ===== SWISS DARK PALETTE (Default) ===== */
    
    /* Background - Warm dark gray (not pure black) */
    --phonon-bg: 220 12% 10%;
    --phonon-fg: 40 15% 88%;
    
    /* Primary - Subtle cream */
    --phonon-primary: 40 18% 82%;
    --phonon-primary-fg: 220 12% 12%;
    
    /* Secondary - Muted warm */
    --phonon-secondary: 35 10% 55%;
    --phonon-secondary-fg: 40 15% 88%;
    
    /* Muted - For subtle elements */
    --phonon-muted: 220 10% 16%;
    --phonon-muted-fg: 40 8% 55%;
    
    /* Accent - Terracotta */
    --phonon-accent: 20 25% 48%;
    --phonon-accent-fg: 40 15% 88%;
    
    /* Card surfaces */
    --phonon-card: 220 10% 12%;
    --phonon-card-fg: 40 15% 88%;
    
    /* Borders */
    --phonon-border: 220 8% 22%;
    --phonon-input: 220 10% 18%;
    --phonon-ring: 150 22% 42%;
    
    /* Radius */
    --phonon-radius: 0.5rem;
    
    /* Nature accents */
    --phonon-sage: 150 22% 42%;
    --phonon-lake: 200 25% 45%;
    --phonon-warm: 35 35% 65%;
    --phonon-charcoal: 220 12% 14%;
    
    /* ===== PHI-BASED SPACING ===== */
    --phonon-space-xs: 0.382rem;
    --phonon-space-sm: 0.618rem;
    --phonon-space-md: 1rem;
    --phonon-space-lg: 1.618rem;
    --phonon-space-xl: 2.618rem;
    --phonon-space-2xl: 4.236rem;
    --phonon-space-3xl: 6.854rem;
    
    /* ===== TYPOGRAPHY ===== */
    --phonon-font-display: 'Space Grotesk', system-ui, sans-serif;
    --phonon-font-body: 'Inter', system-ui, sans-serif;
    --phonon-font-mono: 'IBM Plex Mono', 'SF Mono', monospace;
    
    /* Swiss scale (responsive) */
    --phonon-text-hero: clamp(4rem, 15vw, 12rem);
    --phonon-text-display: clamp(3rem, 8vw, 6rem);
    --phonon-text-heading: clamp(1.75rem, 4vw, 3rem);
    --phonon-text-subheading: clamp(1.125rem, 2vw, 1.5rem);
    --phonon-text-body: 1rem;
    --phonon-text-caption: 0.75rem;
    --phonon-text-index: clamp(6rem, 20vw, 16rem);
    
    /* Animation */
    --phonon-duration-slow: 800ms;
    --phonon-duration-medium: 500ms;
    --phonon-duration-fast: 200ms;
    --phonon-ease-calm: cubic-bezier(0.25, 0.1, 0.25, 1);
    --phonon-ease-swiss: cubic-bezier(0.4, 0, 0.2, 1);

    /* ============================================
       DESIGN DNA - Color Tokens
       ============================================ */

    /* Text hierarchy - Light theme */
    --dna-text-primary: #0a0a0a;
    --dna-text-secondary: #1a1a1a;
    --dna-text-tertiary: #2d2d2d;
    --dna-text-muted: #4a4a4a;
    --dna-text-inverse: #fafafa;

    /* Backgrounds */
    --dna-bg-paper: #f4f1ea;
    --dna-bg-card: #faf9f7;
    --dna-bg-muted: #e8e5de;
    --dna-bg-inverse: #0a0a0a;

    /* Accents */
    --dna-accent-primary: #4a7c59;
    --dna-accent-secondary: #6b8e7a;
    --dna-border: #2f2f2f;
    --dna-border-light: #d1cdc4;

    /* Typography */
    --dna-font-display: 'Playfair Display', Georgia, serif;
    --dna-font-body: 'Droid Serif', Georgia, serif;
    --dna-font-sans: 'Space Grotesk', 'Inter', sans-serif;
    --dna-font-mono: 'IBM Plex Mono', monospace;
  }

  /* Light mode */
  .light, [data-theme="light"] {
    --phonon-bg: 42 18% 95%;
    --phonon-fg: 220 12% 15%;

    --phonon-primary: 220 12% 18%;
    --phonon-primary-fg: 40 15% 92%;

    --phonon-secondary: 35 12% 78%;
    --phonon-secondary-fg: 220 12% 15%;

    --phonon-muted: 40 12% 90%;
    --phonon-muted-fg: 220 8% 40%;

    --phonon-accent: 20 28% 42%;
    --phonon-accent-fg: 40 15% 92%;

    --phonon-card: 42 16% 97%;
    --phonon-card-fg: 220 12% 15%;

    --phonon-border: 40 10% 85%;
    --phonon-input: 40 10% 88%;

    --phonon-sage: 150 25% 38%;
    --phonon-lake: 200 28% 42%;
    --phonon-warm: 35 40% 55%;
  }

  /* Dark theme DNA variables */
  .dark, [data-theme="dark"] {
    --dna-text-primary: #fafafa;
    --dna-text-secondary: #e8e8e8;
    --dna-text-tertiary: #b0b0b0;
    --dna-text-muted: #707070;
    --dna-text-inverse: #0a0a0a;

    --dna-bg-paper: #0f0f0f;
    --dna-bg-card: #1a1a1a;
    --dna-bg-muted: #252525;
    --dna-bg-inverse: #fafafa;

    --dna-border: #444444;
    --dna-border-light: #333333;
  }

  /* Minimal theme */
  [data-theme="minimal"] {
    --phonon-bg: 0 0% 100%;
    --phonon-fg: 0 0% 0%;
    --phonon-primary: 0 0% 0%;
    --phonon-primary-fg: 0 0% 100%;
    --phonon-muted: 0 0% 96%;
    --phonon-muted-fg: 0 0% 40%;
    --phonon-border: 0 0% 90%;
    --phonon-sage: 0 0% 30%;
    --phonon-lake: 0 0% 40%;
    --phonon-warm: 0 0% 50%;
  }

  [data-theme="minimal"].dark {
    --phonon-bg: 0 0% 0%;
    --phonon-fg: 0 0% 100%;
    --phonon-primary: 0 0% 100%;
    --phonon-primary-fg: 0 0% 0%;
    --phonon-muted: 0 0% 10%;
    --phonon-muted-fg: 0 0% 60%;
    --phonon-border: 0 0% 20%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    @apply bg-background text-foreground;
    font-family: var(--phonon-font-body);
    font-size: var(--phonon-text-body);
    line-height: 1.618;
    letter-spacing: -0.01em;
  }
}

/* ===== TYPOGRAPHY UTILITIES ===== */
@layer utilities {
  .phonon-font-display {
    font-family: var(--phonon-font-display);
  }
  
  .phonon-font-mono {
    font-family: var(--phonon-font-mono);
  }
  
  /* Swiss typography scale */
  .phonon-text-hero {
    font-size: var(--phonon-text-hero);
    line-height: 0.9;
    letter-spacing: -0.04em;
    font-family: var(--phonon-font-display);
  }
  
  .phonon-text-display {
    font-size: var(--phonon-text-display);
    line-height: 0.95;
    letter-spacing: -0.03em;
    font-family: var(--phonon-font-display);
  }
  
  .phonon-text-heading {
    font-size: var(--phonon-text-heading);
    line-height: 1.1;
    letter-spacing: -0.02em;
    font-family: var(--phonon-font-display);
  }
  
  .phonon-text-subheading {
    font-size: var(--phonon-text-subheading);
    line-height: 1.3;
    letter-spacing: -0.01em;
  }
  
  .phonon-text-index {
    font-size: var(--phonon-text-index);
    line-height: 0.85;
    letter-spacing: -0.05em;
    font-family: var(--phonon-font-display);
  }
  
  /* Swiss monospace labels */
  .phonon-label {
    font-family: var(--phonon-font-mono);
    font-size: 0.625rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
  }
  
  /* Golden ratio line height */
  .phonon-leading-phi {
    line-height: 1.618;
  }
  
  /* Swiss grid background */
  .phonon-grid {
    background-image: 
      linear-gradient(to right, hsl(var(--phonon-fg) / 0.04) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--phonon-fg) / 0.04) 1px, transparent 1px);
    background-size: 48px 48px;
  }
  
  /* Container utilities */
  .phonon-container {
    @apply mx-auto px-6 md:px-8 lg:px-12;
    max-width: 1400px;
  }
  
  .phonon-section {
    padding-top: var(--phonon-space-3xl);
    padding-bottom: var(--phonon-space-3xl);
  }
  
  @media (max-width: 768px) {
    .phonon-section {
      padding-top: var(--phonon-space-2xl);
      padding-bottom: var(--phonon-space-2xl);
    }
  }
}

/* ===== CHAT/MARKDOWN STYLES ===== */
@layer components {
  /* Chat message container */
  .phonon-chat-message {
    @apply relative;
  }
  
  .phonon-chat-message--user {
    @apply ml-auto max-w-[80%];
  }
  
  .phonon-chat-message--assistant {
    @apply mr-auto max-w-[90%];
  }
  
  /* Typewriter cursor */
  .phonon-cursor {
    @apply inline-block w-[2px] h-[1.1em] bg-current ml-0.5 align-middle;
    animation: typing-cursor 1s step-end infinite;
  }
  
  /* ===== SWISS EDITORIAL PROSE STYLES ===== */
  /* Font foundry / journalistic typography */

  .phonon-prose {
    @apply text-foreground;
    font-family: var(--phonon-font-body);
    line-height: 1.45; /* Swiss tight leading */
    letter-spacing: -0.01em;
  }

  /* Heading hierarchy with weight differentiation */
  .phonon-prose h1,
  .phonon-prose h2 {
    font-family: var(--phonon-font-display);
    @apply font-semibold tracking-tight text-foreground;
    line-height: 1.1;
  }

  .phonon-prose h3,
  .phonon-prose h4 {
    font-family: var(--phonon-font-display);
    @apply font-medium tracking-tight text-foreground;
    line-height: 1.2;
  }

  /* Heading sizes with asymmetric spacing (more above, less below) */
  .phonon-prose h1 {
    @apply text-3xl;
    margin-top: 2.5rem;
    margin-bottom: 0.75rem;
    letter-spacing: -0.03em;
  }

  .phonon-prose h2 {
    @apply text-2xl;
    margin-top: 2rem;
    margin-bottom: 0.625rem;
    letter-spacing: -0.025em;
  }

  .phonon-prose h3 {
    @apply text-xl;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
    letter-spacing: -0.02em;
  }

  .phonon-prose h4 {
    @apply text-lg;
    margin-top: 1.25rem;
    margin-bottom: 0.375rem;
  }

  /* Paragraphs */
  .phonon-prose p {
    margin-bottom: 1rem;
    line-height: 1.5;
  }

  /* First paragraph after heading - tighter spacing */
  .phonon-prose h1 + p,
  .phonon-prose h2 + p,
  .phonon-prose h3 + p {
    margin-top: 0;
  }

  /* Semantic emphasis styling */
  .phonon-prose strong {
    @apply font-semibold text-foreground;
  }

  .phonon-prose em {
    @apply italic;
    opacity: 0.9;
  }

  .phonon-prose mark {
    @apply bg-warm/20 px-1 rounded-sm;
    color: inherit;
  }

  /* Links - Swiss minimal underline */
  .phonon-prose a {
    @apply text-sage underline-offset-2 hover:text-lake transition-colors;
    text-decoration: underline;
    text-decoration-thickness: 1px;
  }

  /* Inline code */
  .phonon-prose code {
    font-family: var(--phonon-font-mono);
    @apply bg-muted/50 px-1.5 py-0.5 rounded text-[0.9em];
    font-weight: 450;
  }

  /* Code blocks */
  .phonon-prose pre {
    @apply bg-muted/30 border border-border/50 p-4 rounded-md overflow-x-auto my-6;
    line-height: 1.5;
  }

  .phonon-prose pre code {
    @apply bg-transparent p-0 text-sm;
    font-weight: 400;
  }

  /* Blockquotes - Editorial style (NOT italic) */
  .phonon-prose blockquote {
    @apply border-l-4 border-sage/40 pl-5 my-6;
    font-style: normal; /* Swiss doesn't use italic for quotes */
    @apply text-foreground/80;
  }

  .phonon-prose blockquote p {
    margin-bottom: 0.5rem;
  }

  .phonon-prose blockquote p:last-child {
    margin-bottom: 0;
  }

  /* Lists with styled markers */
  .phonon-prose ul,
  .phonon-prose ol {
    @apply pl-5 my-4;
  }

  .phonon-prose ul {
    list-style-type: disc;
  }

  .phonon-prose ol {
    list-style-type: decimal;
  }

  .phonon-prose li {
    margin-bottom: 0.375rem;
    padding-left: 0.25rem;
  }

  .phonon-prose li::marker {
    @apply text-sage/70;
  }

  /* Nested lists */
  .phonon-prose li > ul,
  .phonon-prose li > ol {
    margin-top: 0.375rem;
    margin-bottom: 0;
  }

  /* Horizontal rule */
  .phonon-prose hr {
    @apply border-border/50 my-8;
  }

  /* Images */
  .phonon-prose img {
    @apply rounded-md my-6 max-w-full;
  }

  /* Tables */
  .phonon-prose table {
    @apply w-full border-collapse my-6;
  }

  .phonon-prose th,
  .phonon-prose td {
    @apply border border-border/50 px-3 py-2 text-left;
  }

  .phonon-prose th {
    @apply bg-muted/50 font-medium text-sm uppercase tracking-wide;
    letter-spacing: 0.05em;
  }

  /* ===== EDITORIAL TYPOGRAPHY UTILITIES ===== */

  /* Drop cap for first paragraph */
  .phonon-prose-dropcap > p:first-of-type::first-letter {
    @apply float-left font-display font-bold mr-3;
    font-size: 3.5rem;
    line-height: 0.85;
    margin-top: 0.1em;
  }

  /* Pull quote variant */
  .phonon-pullquote {
    @apply text-xl font-display text-center my-8 px-6;
    font-weight: 500;
    letter-spacing: -0.02em;
    line-height: 1.3;
    @apply text-foreground/90;
  }

  /* Figure caption styling */
  .phonon-caption {
    @apply font-mono text-xs text-muted-foreground mt-2;
    letter-spacing: 0.03em;
  }

  /* Compact prose variant (for chat) */
  .phonon-prose-compact {
    @apply text-foreground;
    font-family: var(--phonon-font-body);
    line-height: 1.4;
  }

  .phonon-prose-compact p {
    margin-bottom: 0.75rem;
  }

  .phonon-prose-compact p:last-child {
    margin-bottom: 0;
  }

  /* ========================================
     NEWSPAPER EDITORIAL SYSTEM
     Based on Silke V's Newspaper Style Design
     ======================================== */

  /* Full page wrapper */
  .newspaper-page {
    min-height: 100vh;
    background-color: #f4f1ea;
    color: #1a1a1a;
    padding: 2rem 3rem;
    font-family: 'Droid Serif', Georgia, serif;
    font-size: 14px;
    line-height: 1.6;
  }

  .newspaper-dark {
    background-color: #0f0f0f;
    color: #e8e8e8;
  }

  /* Masthead */
  .newspaper-header {
    text-align: center;
    border-bottom: 2px solid currentColor;
    padding-bottom: 1rem;
    margin-bottom: 2rem;
  }

  .newspaper-masthead {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 72px;
    font-weight: 900;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    line-height: 1;
    margin: 0;
  }

  .newspaper-date {
    font-size: 11px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    margin-top: 0.75rem;
    opacity: 0.7;
  }

  /* Multi-column grid - 5 columns */
  .newspaper-grid {
    display: flex;
    flex-wrap: wrap;
  }

  .newspaper-column {
    width: 17.5%;
    padding: 0 1rem;
    border-left: 1px solid #2f2f2f;
    min-height: 200px;
    /* ARCHITECTURAL CONSTRAINTS */
    contain: layout style;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }

  .newspaper-dark .newspaper-column {
    border-left-color: #444;
  }

  .newspaper-column:first-child {
    border-left: none;
  }

  /* Citation column - wider to prevent word-per-line */
  .newspaper-column:has(.newspaper-citation) {
    min-width: 250px;
  }

  /* Fallback utility class for browsers without :has() support */
  .newspaper-column-citation {
    min-width: 250px;
    flex-shrink: 0;
  }

  /* Span utilities */
  .span-2 { width: 35%; }
  .span-3 { width: 52.5%; }
  .span-4 { width: 70%; }
  .span-5 { width: 87.5%; }

  /* Headline hierarchy */
  .newspaper-hl1,
  .newspaper-hl2,
  .newspaper-hl3,
  .newspaper-hl4,
  .newspaper-hl5,
  .newspaper-hl6 {
    /* WORD COHESION - NO BREAKING IN HEADLINES */
    hyphens: none;
    word-break: keep-all;
    overflow-wrap: normal;
    text-wrap: balance; /* Modern CSS 2024+ */
    color: #1a1a1a;
  }

  .newspaper-hl1 {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: clamp(1.25rem, 3vw, 2.25rem);
    font-weight: 700;
    text-transform: uppercase;
    line-height: 1.1;
    margin: 0 0 1rem;
    letter-spacing: 0.02em;
    color: #0a0a0a !important;
    /* Word handling */
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: none;
  }

  .newspaper-hl2 {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 28px;
    font-weight: 400;
    font-style: italic;
    line-height: 1.2;
    margin: 0 0 0.75rem;
  }

  .newspaper-hl3 {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 24px;
    font-weight: 400;
    font-style: italic;
    line-height: 1.25;
    margin: 0 0 0.5rem;
  }

  .newspaper-hl4 {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 18px;
    font-weight: 600;
    line-height: 1.3;
    margin: 0 0 0.5rem;
  }

  .newspaper-hl5 {
    font-family: 'Droid Serif', Georgia, serif;
    font-size: 14px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin: 0 0 0.5rem;
  }

  .newspaper-hl6 {
    font-family: 'Droid Serif', Georgia, serif;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    margin: 0 0 0.5rem;
  }

  /* Pull quote / Citation */
  .newspaper-citation {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: clamp(1rem, 2vw, 1.5rem);
    line-height: 1.4;
    text-align: center;
    padding: 1.5rem 0.5rem;
    margin: 1rem 0;
    position: relative;
    color: #0a0a0a !important;
    /* CRITICAL: Prevent one-word-per-line */
    min-width: 200px;
    max-width: 100%;
    white-space: normal;
    word-break: normal;
    overflow-wrap: normal;
    text-wrap: balance;
    hyphens: none;
  }

  .newspaper-citation::before,
  .newspaper-citation::after {
    content: '';
    display: block;
    width: 100px;
    height: 0;
    border-top: 1px solid #2f2f2f;
    margin: 0 auto;
  }

  .newspaper-dark .newspaper-citation::before,
  .newspaper-dark .newspaper-citation::after {
    border-top-color: #666;
  }

  .newspaper-citation::before {
    margin-bottom: 1.5rem;
  }

  .newspaper-citation::after {
    margin-top: 1.5rem;
  }

  .newspaper-citation p {
    margin: 0;
    font-style: italic;
  }

  .newspaper-citation cite {
    display: block;
    font-size: 14px;
    font-style: normal;
    margin-top: 1rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  /* Container query fallback for narrow columns */
  @supports (container-type: inline-size) {
    .newspaper-citation {
      container-type: inline-size;
    }

    @container (max-width: 300px) {
      .newspaper-citation {
        font-size: 1rem;
        line-height: 1.4;
      }
    }
  }

  /* Media query fallback for browsers without container queries */
  @media (max-width: 600px) {
    .newspaper-citation {
      font-size: 1.5rem;
      line-height: 1.35;
    }
  }

  /* Body text */
  .newspaper-body {
    font-family: 'Droid Serif', Georgia, serif;
    font-size: 15px;
    line-height: 1.7;
    font-weight: 400;
    color: #1a1a1a;
    letter-spacing: 0.01em;
    text-align: justify;
    hyphens: auto;
    text-wrap: pretty; /* Modern CSS - better line breaks */
  }

  .newspaper-body p {
    margin: 0 0 1rem;
    text-indent: 1.5em;
  }

  .newspaper-body p:first-of-type {
    text-indent: 0;
  }

  .newspaper-dark .newspaper-body {
    color: #e0e0e0;
  }

  .newspaper-dark .newspaper-hl1,
  .newspaper-dark .newspaper-hl2,
  .newspaper-dark .newspaper-hl3,
  .newspaper-dark .newspaper-hl4,
  .newspaper-dark .newspaper-hl5,
  .newspaper-dark .newspaper-hl6 {
    color: #e8e8e8;
  }

  .newspaper-dark .newspaper-citation {
    color: #e8e8e8;
  }

  /* Drop cap */
  .newspaper-body.has-dropcap p:first-of-type::first-letter {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 5em;
    float: left;
    line-height: 0.8;
    padding-right: 0.5rem;
    padding-top: 0.1rem;
    font-weight: 700;
  }

  /* Image with vintage effect */
  .newspaper-figure {
    margin: 1.5rem 0;
  }

  .newspaper-image {
    width: 100%;
    filter: sepia(80%) grayscale(1) contrast(1) opacity(0.8);
    mix-blend-mode: multiply;
  }

  .newspaper-caption {
    font-size: 11px;
    font-style: italic;
    text-align: center;
    margin-top: 0.5rem;
    opacity: 0.8;
  }

  /* Responsive */
  @media (max-width: 1200px) {
    .newspaper-column { width: 31%; }
    .span-2 { width: 62%; }
    .span-3, .span-4, .span-5 { width: 93%; }
  }

  @media (max-width: 768px) {
    .newspaper-column { width: 48%; }
    .span-2, .span-3, .span-4, .span-5 { width: 96%; }
    .newspaper-masthead { font-size: 48px; }
    .newspaper-citation { font-size: 1.125rem; }
  }

  @media (max-width: 480px) {
    .newspaper-page { padding: 1rem; }
    .newspaper-column { width: 100%; border-left: none; border-top: 1px solid #2f2f2f; padding: 1rem 0; }
    .newspaper-column:first-child { border-top: none; }
    .span-2, .span-3, .span-4, .span-5 { width: 100%; }
    .newspaper-masthead { font-size: 36px; }
  }

  /* Article content that flows across columns */
  .newspaper-article-flow {
    column-count: 3;
    column-gap: 2rem;
    column-rule: 1px solid #2f2f2f;
    padding: 0 1rem;
  }

  .newspaper-dark .newspaper-article-flow {
    column-rule-color: #444;
  }

  /* Prevent breaks inside elements */
  .newspaper-article-flow h1,
  .newspaper-article-flow h2,
  .newspaper-article-flow h3,
  .newspaper-article-flow blockquote,
  .newspaper-article-flow figure {
    break-inside: avoid;
    break-after: avoid;
  }

  .newspaper-article-flow p {
    break-inside: avoid;
    orphans: 3;
    widows: 3;
  }

  /* Responsive columns */
  @media (max-width: 1200px) {
    .newspaper-article-flow {
      column-count: 2;
    }
  }

  @media (max-width: 768px) {
    .newspaper-article-flow {
      column-count: 1;
    }
  }
}

/* ===== ACCENT UTILITIES ===== */
@layer utilities {
  .phonon-text-sage { color: hsl(var(--phonon-sage)); }
  .phonon-text-lake { color: hsl(var(--phonon-lake)); }
  .phonon-text-warm { color: hsl(var(--phonon-warm)); }
  
  .phonon-bg-sage { background-color: hsl(var(--phonon-sage)); }
  .phonon-bg-lake { background-color: hsl(var(--phonon-lake)); }
  .phonon-bg-warm { background-color: hsl(var(--phonon-warm)); }
  
  .phonon-border-sage { border-color: hsl(var(--phonon-sage)); }
  .phonon-border-lake { border-color: hsl(var(--phonon-lake)); }
  .phonon-border-warm { border-color: hsl(var(--phonon-warm)); }
}

/* ===== ANIMATIONS ===== */
@keyframes typing-cursor {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

@keyframes phonon-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes phonon-fade-up {
  from { 
    opacity: 0; 
    transform: translateY(10px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

@keyframes phonon-slide-in {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* ============================================
   DESIGN DNA - FORCED COLOR OVERRIDES
   These MUST be last to ensure proper cascade
   ============================================ */

/* Light theme - ALL newspaper text must be dark */
.newspaper-page,
.newspaper-page *,
.newspaper-article-flow,
.newspaper-article-flow * {
  color: #0a0a0a !important;
}

/* Specific element colors */
.newspaper-page h1,
.newspaper-page h2,
.newspaper-hl1,
.newspaper-hl2 {
  color: #000000 !important;
}

.newspaper-page h3,
.newspaper-page h4,
.newspaper-page h5,
.newspaper-page h6,
.newspaper-hl3,
.newspaper-hl4,
.newspaper-hl5,
.newspaper-hl6 {
  color: #1a1a1a !important;
}

.newspaper-page p,
.newspaper-body,
.newspaper-body p,
.newspaper-article-flow p {
  color: #1a1a1a !important;
}

.newspaper-citation,
.newspaper-citation p,
.newspaper-page blockquote,
.newspaper-page blockquote p {
  color: #0a0a0a !important;
}

/* Border/line colors */
.newspaper-column {
  border-left-color: #2f2f2f !important;
}

.newspaper-citation::before,
.newspaper-citation::after {
  border-top-color: #2f2f2f !important;
}

/* Dark theme overrides */
.newspaper-dark,
.newspaper-dark *,
.newspaper-dark .newspaper-article-flow,
.newspaper-dark .newspaper-article-flow * {
  color: #fafafa !important;
}

.newspaper-dark .newspaper-column {
  border-left-color: #444 !important;
}

.newspaper-dark .newspaper-citation::before,
.newspaper-dark .newspaper-citation::after {
  border-top-color: #666 !important;
}
